(function(){"use strict";angular.module("leaflet-directive",[]).directive("leaflet",["$q","leafletData","leafletMapDefaults","leafletHelpers","leafletEvents",function(n,t,i,r,u){var f;return{restrict:"EA",replace:!0,scope:{center:"=center",defaults:"=defaults",maxbounds:"=maxbounds",bounds:"=bounds",markers:"=markers",legend:"=legend",geojson:"=geojson",paths:"=paths",tiles:"=tiles",layers:"=layers",controls:"=controls",decorations:"=decorations",eventBroadcast:"=eventBroadcast"},transclude:!0,template:'<div class="angular-leaflet-map"><div ng-transclude><\/div><\/div>',controller:["$scope",function(t){f=n.defer();this.getMap=function(){return f.promise};this.getLeafletScope=function(){return t}}],link:function(n,e,o){function p(){isNaN(o.width)?e.css("width",o.width):e.css("width",o.width+"px")}function w(){isNaN(o.height)?e.css("height",o.height):e.css("height",o.height+"px")}var h=r.isDefined,c=i.setDefaults(n.defaults,o.id),k=u.genDispatchMapEvent,y=u.getAvailableMapEvents(),s,v,b,l,a;if(h(o.width)&&(p(),n.$watch(function(){return e[0].getAttribute("width")},function(){p();s.invalidateSize()})),h(o.height)&&(w(),n.$watch(function(){return e[0].getAttribute("height")},function(){w();s.invalidateSize()})),s=new L.Map(e[0],i.getMapCreationDefaults(o.id)),f.resolve(s),h(o.center)||s.setView([c.center.lat,c.center.lng],c.center.zoom),h(o.tiles)||h(o.layers)||(v=L.tileLayer(c.tileLayer,c.tileLayerOptions),v.addTo(s),t.setTiles(v,o.id)),h(s.zoomControl)&&h(c.zoomControlPosition)&&s.zoomControl.setPosition(c.zoomControlPosition),h(s.zoomControl)&&c.zoomControl===!1&&s.zoomControl.removeFrom(s),h(s.zoomsliderControl)&&h(c.zoomsliderControl)&&c.zoomsliderControl===!1&&s.zoomsliderControl.removeFrom(s),!h(o.eventBroadcast))for(b="broadcast",l=0;l<y.length;l++){a=y[l];s.on(a,k(n,a,b),{eventName:a})}s.whenReady(function(){t.setMap(s,o.id)});n.$on("$destroy",function(){s.remove();t.unresolveMap(o.id)});n.$on("invalidateSize",function(){s.invalidateSize()})}}}]);angular.module("leaflet-directive").directive("center",["$log","$q","$location","$timeout","leafletMapDefaults","leafletHelpers","leafletBoundsHelpers","leafletEvents",function(n,t,i,r,u,f,e,o){var s=f.isDefined,a=f.isNumber,h=f.isSameCenterOnMap,c=f.safeApply,v=f.isValidCenter,y=f.isEmpty,p=f.isUndefinedOrEmpty,w=function(n,t){return s(n)&&!y(n)&&p(t)},l;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){l=t.defer();this.getCenter=function(){return l.promise}},link:function(t,f,y,p){var b=p.getLeafletScope(),k=b.center;p.getMap().then(function(f){var p=u.getDefaults(y.id),d,nt,g;if(y.center.search("-")!==-1){n.error('The "center" variable can\'t use a "-" on his key name: "'+y.center+'".');f.setView([p.center.lat,p.center.lng],p.center.zoom);return}if(w(b.bounds,k))f.fitBounds(e.createLeafletBounds(b.bounds)),k=f.getCenter(),c(b,function(n){n.center={lat:f.getCenter().lat,lng:f.getCenter().lng,zoom:f.getZoom(),autoDiscover:!1}}),c(b,function(n){var t=f.getBounds(),i={northEast:{lat:t._northEast.lat,lng:t._northEast.lng},southWest:{lat:t._southWest.lat,lng:t._southWest.lng}};n.bounds=i});else if(s(k))s(k.lat)&&s(k.lng)||s(k.autoDiscover)||angular.copy(p.center,k);else{n.error('The "center" property is not defined in the main scope');f.setView([p.center.lat,p.center.lng],p.center.zoom);return}y.urlHashCenter==="yes"&&(g=function(){var t=i.search(),r,n;return s(t.c)&&(n=t.c.split(":"),n.length===3&&(r={lat:parseFloat(n[0]),lng:parseFloat(n[1]),zoom:parseInt(n[2],10)})),r},d=g(),b.$on("$locationChangeSuccess",function(n){var i=n.currentScope,t=g();s(t)&&!h(t,f)&&(i.center={lat:t.lat,lng:t.lng,zoom:t.zoom})}));b.$watch("center",function(t){if(s(d)&&(angular.copy(d,t),d=undefined),!v(t)&&t.autoDiscover!==!0){n.warn("[AngularJS - Leaflet] invalid 'center'");return}if(t.autoDiscover===!0){a(t.zoom)||f.setView([p.center.lat,p.center.lng],p.center.zoom);a(t.zoom)&&t.zoom>p.center.zoom?f.locate({setView:!0,maxZoom:t.zoom}):s(p.maxZoom)?f.locate({setView:!0,maxZoom:p.maxZoom}):f.locate({setView:!0});return}nt&&h(t,f)||(b.settingCenterFromScope=!0,f.setView([t.lat,t.lng],t.zoom),o.notifyCenterChangedToBounds(b,f),r(function(){b.settingCenterFromScope=!1}))},!0);f.whenReady(function(){nt=!0});f.on("moveend",function(){(l.resolve(),o.notifyCenterUrlHashChanged(b,f,y,i.search()),h(k,f)||t.settingCenterFromScope)||c(b,function(n){b.settingCenterFromScope||(n.center={lat:f.getCenter().lat,lng:f.getCenter().lng,zoom:f.getZoom(),autoDiscover:!1});o.notifyCenterChangedToBounds(b,f)})});if(k.autoDiscover===!0)f.on("locationerror",function(){n.warn("[AngularJS - Leaflet] The Geolocation API is unauthorized on this page.");v(k)?(f.setView([k.lat,k.lng],k.zoom),o.notifyCenterChangedToBounds(b,f)):(f.setView([p.center.lat,p.center.lng],p.center.zoom),o.notifyCenterChangedToBounds(b,f))})})}}}]);angular.module("leaflet-directive").directive("tiles",["$log","leafletData","leafletMapDefaults","leafletHelpers",function(n,t,i,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(u,f,e,o){var s=r.isDefined,h=o.getLeafletScope(),c=h.tiles;if(!s(c)&&!s(c.url)){n.warn("[AngularJS - Leaflet] The 'tiles' definition doesn't have the 'url' property.");return}o.getMap().then(function(n){var u=i.getDefaults(e.id),r;h.$watch("tiles",function(i){var f=u.tileLayerOptions,o=u.tileLayer;if(!s(i.url)&&s(r)){n.removeLayer(r);return}if(!s(r)){s(i.options)&&angular.copy(i.options,f);s(i.url)&&(o=i.url);r=L.tileLayer(o,f);r.addTo(n);t.setTiles(r,e.id);return}if(s(i.url)&&s(i.options)&&!angular.equals(i.options,f)){n.removeLayer(r);f=u.tileLayerOptions;angular.copy(i.options,f);o=i.url;r=L.tileLayer(o,f);r.addTo(n);t.setTiles(r,e.id);return}s(i.url)&&r.setUrl(i.url)},!0)})}}}]);angular.module("leaflet-directive").directive("legend",["$log","$http","leafletHelpers","leafletLegendHelpers",function(n,t,i,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(u,f,e,o){var a=i.isArray,h=i.isDefined,p=i.isFunction,l=o.getLeafletScope(),c=l.legend,v=c.legendClass?c.legendClass:"legend",y=c.position||"bottomright",s;o.getMap().then(function(i){l.$watch("legend",function(t){h(t.url)||a(t.colors)&&a(t.labels)&&t.colors.length===t.labels.length?h(t.url)?n.info("[AngularJS - Leaflet] loading arcgis legend service."):(h(s)&&s.removeFrom(i),s=L.control({position:y}),s.onAdd=r.getOnAddArrayLegend(t,v),s.addTo(i)):n.warn("[AngularJS - Leaflet] legend.colors and legend.labels must be set.")});l.$watch("legend.url",function(u){h(u)&&t.get(u).success(function(n){h(s)?r.updateArcGISLegend(s.getContainer(),n):(s=L.control({position:y}),s.onAdd=r.getOnAddArcGISLegend(n,v),s.addTo(i));h(c.loadedData)&&p(c.loadedData)&&c.loadedData()}).error(function(){n.warn("[AngularJS - Leaflet] legend.url not loaded.")})})})}}}]);angular.module("leaflet-directive").directive("geojson",["$log","$rootScope","leafletData","leafletHelpers",function(n,t,i,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(n,u,f,e){var c=r.safeApply,s=r.isDefined,h=e.getLeafletScope(),o={};e.getMap().then(function(n){h.$watch("geojson",function(u){if(s(o)&&n.hasLayer(o)&&n.removeLayer(o),s(u)&&s(u.data)){var l=u.resetStyleOnMouseout,e=u.onEachFeature;e||(e=function(n,i){r.LabelPlugin.isLoaded()&&s(u.label)&&i.bindLabel(n.properties.description);i.on({mouseover:function(i){c(h,function(){u.selected=n;t.$broadcast("leafletDirectiveMap.geojsonMouseover",i)})},mouseout:function(n){l&&o.resetStyle(n.target);c(h,function(){u.selected=undefined;t.$broadcast("leafletDirectiveMap.geojsonMouseout",n)})},click:function(i){c(h,function(){u.selected=n;t.$broadcast("leafletDirectiveMap.geojsonClick",u.selected,i)})}})});u.options={style:u.style,filter:u.filter,onEachFeature:e,pointToLayer:u.pointToLayer};o=L.geoJson(u.data,u.options);i.setGeoJSON(o,f.id);o.addTo(n)}})})}}}]);angular.module("leaflet-directive").directive("layers",["$log","$q","leafletData","leafletHelpers","leafletLayerHelpers","leafletControlHelpers",function(n,t,i,r,u,f){var e;return{restrict:"A",scope:!1,replace:!1,require:"leaflet",controller:function(){e=t.defer();this.getLayers=function(){return e.promise}},link:function(t,o,s,h){var a=r.isDefined,c={},p=h.getLeafletScope(),l=p.layers,v=u.createLayer,w=f.updateLayersControl,y=!1;h.getMap().then(function(t){var u,f,r,o,h;if(!a(l)||!a(l.baselayers)||Object.keys(l.baselayers).length===0){n.error("[AngularJS - Leaflet] At least one baselayer has to be defined");return}e.resolve(c);i.setLayers(c,s.id);c.baselayers={};c.overlays={};u=s.id;f=!1;for(r in l.baselayers){if(o=v(l.baselayers[r]),!a(o)){delete l.baselayers[r];continue}c.baselayers[r]=o;l.baselayers[r].top===!0&&(t.addLayer(c.baselayers[r]),f=!0)}!f&&Object.keys(c.baselayers).length>0&&t.addLayer(c.baselayers[Object.keys(l.baselayers)[0]]);for(r in l.overlays){if(l.overlays[r].type==="cartodb",h=v(l.overlays[r]),!a(h)){delete l.overlays[r];continue}c.overlays[r]=h;l.overlays[r].visible===!0&&t.addLayer(c.overlays[r])}p.$watch("layers.baselayers",function(i){var f,r,e,o,s;for(f in c.baselayers)a(i[f])||(t.hasLayer(c.baselayers[f])&&t.removeLayer(c.baselayers[f]),delete c.baselayers[f]);for(r in i)a(c.baselayers[r])||(e=v(i[r]),a(e)&&(c.baselayers[r]=e,i[r].top===!0&&t.addLayer(c.baselayers[r])));if(Object.keys(c.baselayers).length===0){n.error("[AngularJS - Leaflet] At least one baselayer has to be defined");return}o=!1;for(s in c.baselayers)if(t.hasLayer(c.baselayers[s])){o=!0;break}o||t.addLayer(c.baselayers[Object.keys(l.baselayers)[0]]);y=w(t,u,y,i,l.overlays,c)},!0);p.$watch("layers.overlays",function(n){var r,i,f;for(r in c.overlays)a(n[r])||(t.hasLayer(c.overlays[r])&&t.removeLayer(c.overlays[r]),delete c.overlays[r]);for(i in n)a(c.overlays[i])||(f=v(n[i]),a(f)&&(c.overlays[i]=f,n[i].visible===!0&&t.addLayer(c.overlays[i]))),n[i].visible&&!t.hasLayer(c.overlays[i])?t.addLayer(c.overlays[i]):n[i].visible===!1&&t.hasLayer(c.overlays[i])&&t.removeLayer(c.overlays[i]);y=w(t,u,y,l.baselayers,n,c)},!0)})}}}]);angular.module("leaflet-directive").directive("bounds",["$log","$timeout","leafletHelpers","leafletBoundsHelpers",function(n,t,i,r){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","center"],link:function(u,f,e,o){var h=i.isDefined,c=r.createLeafletBounds,s=o[0].getLeafletScope(),l=o[0],a=function(n){return n._southWest.lat===0&&n._southWest.lng===0&&n._northEast.lat===0&&n._northEast.lng===0?!0:!1};l.getMap().then(function(i){s.$on("boundsChanged",function(n){var r=n.currentScope,t=i.getBounds(),u;a(t)||r.settingBoundsFromScope||(u={northEast:{lat:t._northEast.lat,lng:t._northEast.lng},southWest:{lat:t._southWest.lat,lng:t._southWest.lng}},angular.equals(r.bounds,u)||(r.bounds=u))});s.$watch("bounds",function(r){if(!h(r)){n.error("[AngularJS - Leaflet] Invalid bounds");return}var f=c(r);f&&!i.getBounds().equals(f)&&(u.settingBoundsFromScope=!0,i.fitBounds(f),t(function(){u.settingBoundsFromScope=!1}))},!0)})}}}]);angular.module("leaflet-directive").directive("markers",["$log","$rootScope","$q","leafletData","leafletHelpers","leafletMapDefaults","leafletMarkersHelpers","leafletEvents",function(n,t,i,r,u,f,e,o){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(t,f,s,h){var a=h[0],v=u,c=u.isDefined,y=u.isString,l=a.getLeafletScope(),p=e.deleteMarker,w=e.addMarkerWatcher,b=e.listenMarkerEvents,k=e.addMarkerToGroup,d=o.bindMarkerEvents,g=e.createMarker;a.getMap().then(function(t){var u={},f;f=c(h[1])?h[1].getLayers:function(){var n=i.defer();return n.resolve(),n.promise};f().then(function(i){r.setMarkers(u,s.id);l.$watch("markers",function(r){var h,o,f,e,nt,a,tt;for(h in u)c(r)&&c(r[h])||(p(u[h],t,i),delete u[h]);for(o in r){if(o.search("-")!==-1){n.error('The marker can\'t use a "-" on his key name: "'+o+'".');continue}if(!c(u[o])){if(f=r[o],e=g(f),!c(e)){n.error("[AngularJS - Leaflet] Received invalid data on the marker "+o+".");continue}if(u[o]=e,c(f.message)&&e.bindPopup(f.message,f.popupOptions),c(f.group)&&(nt=c(f.groupOption)?f.groupOption:null,k(e,f.group,nt,t)),v.LabelPlugin.isLoaded()&&c(f.label)&&c(f.label.message)&&e.bindLabel(f.label.message,f.label.options),c(f)&&c(f.layer)){if(!y(f.layer)){n.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!c(i)){n.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!c(i.overlays)||!c(i.overlays[f.layer])){n.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group"');continue}if(a=i.overlays[f.layer],!(a instanceof L.LayerGroup||a instanceof L.FeatureGroup)){n.error('[AngularJS - Leaflet] Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"');continue}a.addLayer(e);t.hasLayer(e)&&f.focus===!0&&e.openPopup()}else c(f.group)||(t.addLayer(e),f.focus===!0&&e.openPopup(),v.LabelPlugin.isLoaded()&&c(f.label)&&c(f.label.options)&&f.label.options.noHide===!0&&e.showLabel());tt=!c(s.watchMarkers)||s.watchMarkers==="true";tt&&(w(e,o,l,i,t),b(e,f,l));d(e,o,f,l)}}},!0)})})}}}]);angular.module("leaflet-directive").directive("paths",["$log","$q","leafletData","leafletMapDefaults","leafletHelpers","leafletPathsHelpers","leafletEvents",function(n,t,i,r,u,f,e){return{restrict:"A",scope:!1,replace:!1,require:["leaflet","?layers"],link:function(o,s,h,c){var v=c[0],l=u.isDefined,y=u.isString,a=v.getLeafletScope(),p=a.paths,w=f.createPath,b=e.bindPathEvents,k=f.setPathOptions;v.getMap().then(function(f){var o=r.getDefaults(h.id),e;(e=l(c[1])?c[1].getLayers:function(){var n=t.defer();return n.resolve(),n.promise},l(p))&&e().then(function(t){var r={},e;i.setPaths(r,h.id);e=function(n,t){var i=a.$watch("paths."+t,function(t){if(!l(t)){f.removeLayer(n);i();return}k(n,t.type,t)},!0)};a.$watch("paths",function(i){var s,h,c,v,p;for(s in i)if(s.search("\\$")!==0){if(s.search("-")!==-1){n.error('[AngularJS - Leaflet] The path name "'+s+'" is not valid. It must not include "-" and a number.');continue}if(!l(r[s])){if(h=i[s],c=w(s,i[s],o),l(c)&&l(h.message)&&c.bindPopup(h.message),u.LabelPlugin.isLoaded()&&l(h.label)&&l(h.label.message)&&c.bindLabel(h.label.message,h.label.options),l(h)&&l(h.layer)){if(!y(h.layer)){n.error("[AngularJS - Leaflet] A layername must be a string");continue}if(!l(t)){n.error("[AngularJS - Leaflet] You must add layers to the directive if the markers are going to use this functionality.");continue}if(!l(t.overlays)||!l(t.overlays[h.layer])){n.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group"');continue}if(v=t.overlays[h.layer],!(v instanceof L.LayerGroup||v instanceof L.FeatureGroup)){n.error('[AngularJS - Leaflet] Adding a marker to an overlay needs a overlay of the type "group" or "featureGroup"');continue}r[s]=c;v.addLayer(c);e(c,s)}else l(c)&&(r[s]=c,f.addLayer(c),e(c,s));b(c,s,h,a)}}for(p in r)l(i[p])||delete r[p]},!0)})})}}}]);angular.module("leaflet-directive").directive("controls",["$log","leafletHelpers",function(n,t){return{restrict:"A",scope:!1,replace:!1,require:"?^leaflet",link:function(n,i,r,u){if(u){var e=t.isDefined,o=u.getLeafletScope(),f=o.controls;u.getMap().then(function(n){var i,t,r,u;if(e(L.Control.Draw)&&e(f.draw)&&(i=new L.FeatureGroup,t={edit:{featureGroup:i}},angular.extend(t,f.draw),f.draw=t,n.addLayer(t.edit.featureGroup),r=new L.Control.Draw(t),n.addControl(r)),e(f.custom))for(u in f.custom)n.addControl(f.custom[u])})}}}}]);angular.module("leaflet-directive").directive("eventBroadcast",["$log","$rootScope","leafletHelpers","leafletEvents",function(n,t,i,r){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(t,u,f,e){var c=i.isObject,h=e.getLeafletScope(),o=h.eventBroadcast,s=r.getAvailableMapEvents(),l=r.genDispatchMapEvent;e.getMap().then(function(t){var u=[],r,i,v="broadcast",f,e,a;if(c(o)){if(o.map===undefined||o.map===null)u=s;else if(typeof o.map!="object")n.warn("[AngularJS - Leaflet] event-broadcast.map must be an object check your model.");else if(o.map.logic!==undefined&&o.map.logic!==null&&(o.map.logic!=="emit"&&o.map.logic!=="broadcast"?n.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):o.map.logic==="emit"&&(v="emit")),f=!1,e=!1,o.map.enable!==undefined&&o.map.enable!==null&&typeof o.map.enable=="object"&&(f=!0),o.map.disable!==undefined&&o.map.disable!==null&&typeof o.map.disable=="object"&&(e=!0),f&&e)n.warn("[AngularJS - Leaflet] can not enable and disable events at the time");else if(f||e)if(f)for(r=0;r<o.map.enable.length;r++)i=o.map.enable[r],u.indexOf(i)!==-1?n.warn("[AngularJS - Leaflet] This event "+i+" is already enabled"):s.indexOf(i)===-1?n.warn("[AngularJS - Leaflet] This event "+i+" does not exist"):u.push(i);else for(u=s,r=0;r<o.map.disable.length;r++)i=o.map.disable[r],a=u.indexOf(i),a===-1?n.warn("[AngularJS - Leaflet] This event "+i+" does not exist or has been already disabled"):u.splice(a,1);else n.warn("[AngularJS - Leaflet] must enable or disable events");for(r=0;r<u.length;r++){i=u[r];t.on(i,l(h,i,v),{eventName:i})}}else n.warn("[AngularJS - Leaflet] event-broadcast must be an object, check your model.")})}}}]);angular.module("leaflet-directive").directive("maxbounds",["$log","leafletMapDefaults","leafletBoundsHelpers",function(n,t,i){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(n,t,r,u){var f=u.getLeafletScope(),e=i.isValidBounds;u.getMap().then(function(n){f.$watch("maxbounds",function(t){if(!e(t)){n.setMaxBounds();return}var i=[[t.southWest.lat,t.southWest.lng],[t.northEast.lat,t.northEast.lng]];n.setMaxBounds(i);n.fitBounds(i)})})}}}]);angular.module("leaflet-directive").directive("decorations",["$log","leafletHelpers",function(n,t){return{restrict:"A",scope:!1,replace:!1,require:"leaflet",link:function(i,r,u,f){function c(t){return e(t)&&e(t.coordinates)&&(h.isLoaded()||n.error("[AngularJS - Leaflet] The PolylineDecorator Plugin is not loaded.")),L.polylineDecorator(t.coordinates)}function l(n,t){if(e(n)&&e(t)&&e(t.coordinates)&&e(t.patterns))return n.setPaths(t.coordinates),n.setPatterns(t.patterns),n}var s=f.getLeafletScope(),h=t.PolylineDecoratorPlugin,e=t.isDefined,o={};f.getMap().then(function(n){s.$watch("decorations",function(t){var r,u,f,i;for(r in o)e(t)&&e(t[r])||delete o[r],n.removeLayer(o[r]);for(u in t)f=t[u],i=c(f),e(i)&&(o[u]=i,n.addLayer(i),l(i,f))},!0)})}}}]);angular.module("leaflet-directive").directive("layercontrol",["$log","leafletData","leafletHelpers",function(n,t,i){return{restrict:"E",scope:{},replace:!0,transclude:!1,require:"^leaflet",controller:["$scope","$element","$sce",function(r,u,f){var o,s,e;if(n.debug("[Angular Directive - Layers] layers",r,u),o=i.safeApply,s=i.isDefined,angular.extend(r,{baselayer:"",icons:{uncheck:"fa fa-check-square-o",check:"fa fa-square-o",radio:"fa fa-dot-circle-o",unradio:"fa fa-circle-o",up:"fa fa-angle-up",down:"fa fa-angle-down",open:"fa fa-angle-double-down",close:"fa fa-angle-double-up"},changeBaseLayer:function(n,u){i.safeApply(r,function(i){i.baselayer=n;t.getMap().then(function(u){t.getLayers().then(function(t){if(!u.hasLayer(t.baselayers[n])){for(var f in i.layers.baselayers)i.layers.baselayers[f].icon=i.icons.unradio,u.hasLayer(t.baselayers[f])&&u.removeLayer(t.baselayers[f]);u.addLayer(t.baselayers[n]);i.layers.baselayers[n].icon=r.icons.radio}})})});u.preventDefault()},moveLayer:function(n,t,i){var e=Object.keys(r.layers.baselayers).length,u,f;if(t>=1+e&&t<=r.overlaysArray.length+e){for(f in r.layers.overlays)if(r.layers.overlays[f].index===t){u=r.layers.overlays[f];break}u&&o(r,function(){u.index=n.index;n.index=t})}i.stopPropagation();i.preventDefault()},initIndex:function(n,t){var i=Object.keys(r.layers.baselayers).length;n.index=s(n.index)?n.index:t+i+1},toggleOpacity:function(t,i){if(n.debug("Event",t),i.visible){var u=angular.element(t.currentTarget);u.toggleClass(r.icons.close+" "+r.icons.open);u=u.parents(".lf-row").find(".lf-opacity");u.toggle("fast",function(){o(r,function(){i.opacityControl=!i.opacityControl})})}t.stopPropagation();t.preventDefault()},unsafeHTML:function(n){return f.trustAsHtml(n)}}),e=u.get(0),L.Browser.touch)L.DomEvent.on(e,"click",L.DomEvent.stopPropagation);else{L.DomEvent.disableClickPropagation(e);L.DomEvent.on(e,"mousewheel",L.DomEvent.stopPropagation)}}],template:'<div class="angular-leaflet-control-layers" ng-show="overlaysArray.length"><div class="lf-baselayers"><div class="lf-row" ng-repeat="(key, layer) in layers.baselayers"><label class="lf-icon-bl" ng-click="changeBaseLayer(key, $event)"><input class="leaflet-control-layers-selector" type="radio" name="lf-radio" ng-show="false" ng-checked="baselayer === key" ng-value="key" /> <i class="lf-icon lf-icon-radio" ng-class="layer.icon"><\/i><div class="lf-text">{{layer.name}}<\/div><\/label><\/div><\/div><div class="lf-overlays"><div class="lf-container"><div class="lf-row" ng-repeat="layer in overlaysArray | orderBy:\'index\':order" ng-init="initIndex(layer, $index)"><label class="lf-icon-ol"><input class="lf-control-layers-selector" type="checkbox" ng-show="false" ng-model="layer.visible"/> <i class="lf-icon lf-icon-check" ng-class="layer.icon"><\/i><div class="lf-text">{{layer.name}}<\/div><div class="lf-icons"><i class="lf-icon lf-up" ng-class="icons.up" ng-click="moveLayer(layer, layer.index - orderNumber, $event)"><\/i> <i class="lf-icon lf-down" ng-class="icons.down" ng-click="moveLayer(layer, layer.index + orderNumber, $event)"><\/i> <i class="lf-icon lf-open" ng-class="layer.opacityControl? icons.close:icons.open" ng-click="toggleOpacity($event, layer)"><\/i><\/div><\/label><div class="lf-legend" ng-if="layer.legend" ng-bind-html="unsafeHTML(layer.legend)"><\/div><div class="lf-opacity" ng-show="layer.visible &amp;&amp; layer.opacityControl"><input type="text" class="lf-opacity-control" name="lf-opacity-control" data-key="{{layer.index}}" /><\/div><\/div><\/div><\/div><\/div>',link:function(r,u,f,e){var o=i.isDefined,h=e.getLeafletScope(),s=h.layers;f.order=o(f.order)&&(f.order==="normal"||f.order==="reverse")?f.order:"normal";r.order=f.order==="normal";r.orderNumber=f.order==="normal"?-1:1;r.layers=s;e.getMap().then(function(i){if(!o(s)||!o(s.baselayers)||Object.keys(s.baselayers).length===0){n.error("[AngularJS - Leaflet] At least one baselayer has to be defined");return}h.$watch("layers.baselayers",function(n){t.getLayers().then(function(t){for(var u in n)n[u].icon=i.hasLayer(t.baselayers[u])?r.icons.radio:r.icons.unradio})});h.$watch("layers.overlays",function(f){var e=[],h;t.getLayers().then(function(n){for(var t in f)f[t].icon=r.icons[f[t].visible?"uncheck":"check"],e.push(f[t]),o(f[t].index)&&n.overlays[t].setZIndex&&n.overlays[t].setZIndex(f[t].index)});h=r.$watch(function(){if(u.children().size()>1)return u.find(".lf-overlays").trigger("resize"),u.find(".lf-opacity").size()===Object.keys(s.overlays).length},function(f){f===!0&&(o(u.find(".lf-opacity-control").ionRangeSlider)?u.find(".lf-opacity-control").each(function(n,u){var l=Object.keys(s.baselayers).length,f,e,c,h;for(e in r.overlaysArray)r.overlaysArray[e].index===n+l+1&&(f=r.overlaysArray[e]);c=angular.element(u);h=o(f)&&o(f.layerOptions)?f.layerOptions.opacity:undefined;c.ionRangeSlider({min:0,from:o(h)?Math.ceil(h*100):100,step:1,max:100,prettify:!1,hasGrid:!1,hideMinMax:!0,onChange:function(n){t.getLayers().then(function(t){var e=n.input.data().key,r,u;for(var f in s.overlays)if(s.overlays[f].index===e){r=t.overlays[f];u=s.overlays[f];break}i.hasLayer(r)&&(u.layerOptions=o(u.layerOptions)?u.layerOptions:{},u.layerOptions.opacity=n.input.val()/100,r.setOpacity&&r.setOpacity(n.input.val()/100),r.getLayers&&r.eachLayer&&r.eachLayer(function(t){t.setOpacity&&t.setOpacity(n.input.val()/100)}))})}})}):n.warn("[AngularJS - Leaflet] Ion Slide Range Plugin is not loaded"),h())});r.overlaysArray=e},!0)})}}}]);angular.module("leaflet-directive").service("leafletData",["$log","$q","leafletHelpers",function(n,t,i){var r=i.getDefer,u=i.getUnresolvedDefer,f=i.setResolvedDefer,e={},o={},s={},h={},c={},l={},a={},v={};this.setMap=function(n,t){var i=u(e,t);i.resolve(n);f(e,t)};this.getMap=function(n){var t=r(e,n);return t.promise};this.unresolveMap=function(n){var t=i.obtainEffectiveMapId(e,n);e[t]=undefined};this.getPaths=function(n){var t=r(h,n);return t.promise};this.setPaths=function(n,t){var i=u(h,t);i.resolve(n);f(h,t)};this.getMarkers=function(n){var t=r(c,n);return t.promise};this.setMarkers=function(n,t){var i=u(c,t);i.resolve(n);f(c,t)};this.getLayers=function(n){var t=r(s,n);return t.promise};this.setLayers=function(n,t){var i=u(s,t);i.resolve(n);f(s,t)};this.getUTFGrid=function(n){var t=r(a,n);return t.promise};this.setUTFGrid=function(n,t){var i=u(a,t);i.resolve(n);f(a,t)};this.setTiles=function(n,t){var i=u(o,t);i.resolve(n);f(o,t)};this.getTiles=function(n){var t=r(o,n);return t.promise};this.setGeoJSON=function(n,t){var i=u(l,t);i.resolve(n);f(l,t)};this.getGeoJSON=function(n){var t=r(l,n);return t.promise};this.setDecorations=function(n,t){var i=u(v,t);i.resolve(n);f(v,t)};this.getDecorations=function(n){var t=r(v,n);return t.promise}}]);angular.module("leaflet-directive").factory("leafletMapDefaults",["$q","leafletHelpers",function(n,t){function f(){return{keyboard:!0,dragging:!0,worldCopyJump:!1,doubleClickZoom:!0,scrollWheelZoom:!0,touchZoom:!0,zoomControl:!0,zoomsliderControl:!1,zoomControlPosition:"topleft",attributionControl:!0,controls:{layers:{visible:!0,position:"topright",collapsed:!0}},crs:L.CRS.EPSG3857,tileLayer:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayerOptions:{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap<\/a> contributors'},path:{weight:10,opacity:1,color:"#0000ff"},center:{lat:0,lng:0,zoom:1}}}var i=t.isDefined,e=t.isObject,u=t.obtainEffectiveMapId,r={};return{getDefaults:function(n){var t=u(r,n);return r[t]},getMapCreationDefaults:function(n){var o=u(r,n),t=r[o],f={maxZoom:t.maxZoom,keyboard:t.keyboard,dragging:t.dragging,zoomControl:t.zoomControl,doubleClickZoom:t.doubleClickZoom,scrollWheelZoom:t.scrollWheelZoom,touchZoom:t.touchZoom,attributionControl:t.attributionControl,worldCopyJump:t.worldCopyJump,crs:t.crs},e;if(i(t.minZoom)&&(f.minZoom=t.minZoom),i(t.zoomAnimation)&&(f.zoomAnimation=t.zoomAnimation),i(t.fadeAnimation)&&(f.fadeAnimation=t.fadeAnimation),i(t.markerZoomAnimation)&&(f.markerZoomAnimation=t.markerZoomAnimation),t.map)for(e in t.map)f[e]=t.map[e];return f},setDefaults:function(n,t){var o=f(),s;return i(n)&&(o.doubleClickZoom=i(n.doubleClickZoom)?n.doubleClickZoom:o.doubleClickZoom,o.scrollWheelZoom=i(n.scrollWheelZoom)?n.scrollWheelZoom:o.doubleClickZoom,o.touchZoom=i(n.touchZoom)?n.touchZoom:o.doubleClickZoom,o.zoomControl=i(n.zoomControl)?n.zoomControl:o.zoomControl,o.zoomsliderControl=i(n.zoomsliderControl)?n.zoomsliderControl:o.zoomsliderControl,o.attributionControl=i(n.attributionControl)?n.attributionControl:o.attributionControl,o.tileLayer=i(n.tileLayer)?n.tileLayer:o.tileLayer,o.zoomControlPosition=i(n.zoomControlPosition)?n.zoomControlPosition:o.zoomControlPosition,o.keyboard=i(n.keyboard)?n.keyboard:o.keyboard,o.dragging=i(n.dragging)?n.dragging:o.dragging,i(n.controls)&&angular.extend(o.controls,n.controls),e(n.crs)?o.crs=n.crs:i(L.CRS[n.crs])&&(o.crs=L.CRS[n.crs]),i(n.tileLayerOptions)&&angular.copy(n.tileLayerOptions,o.tileLayerOptions),i(n.maxZoom)&&(o.maxZoom=n.maxZoom),i(n.minZoom)&&(o.minZoom=n.minZoom),i(n.zoomAnimation)&&(o.zoomAnimation=n.zoomAnimation),i(n.fadeAnimation)&&(o.fadeAnimation=n.fadeAnimation),i(n.markerZoomAnimation)&&(o.markerZoomAnimation=n.markerZoomAnimation),i(n.worldCopyJump)&&(o.worldCopyJump=n.worldCopyJump),i(n.map)&&(o.map=n.map)),s=u(r,t),r[s]=o,o}}}]);angular.module("leaflet-directive").factory("leafletEvents",["$rootScope","$q","$log","leafletHelpers",function(n,t,i,r){var f=r.safeApply,u=r.isDefined,s=r.isObject,h=r,l=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu"]},c=function(n,t,i,r){for(var f,e=l(),o="markers."+r,u=0;u<e.length;u++){f=e[u];i.label.on(f,y(n,f,t,i.label,o))}},a=function(t,i,r,u,e,o){return function(s){var h="leafletDirectiveMarker."+t;t==="click"?f(r,function(){n.$broadcast("leafletDirectiveMarkersClick",e)}):t==="dragend"&&(f(r,function(){o.lat=u.getLatLng().lat;o.lng=u.getLatLng().lng}),o.message&&o.focus===!0&&u.openPopup());f(r,function(t){i==="emit"?t.$emit(h,{markerName:e,leafletEvent:s}):n.$broadcast(h,{markerName:e,leafletEvent:s})})}},v=function(t,i,r,u,e){return function(u){var o="leafletDirectivePath."+t;f(r,function(t){i==="emit"?t.$emit(o,{pathName:e,leafletEvent:u}):n.$broadcast(o,{pathName:e,leafletEvent:u})})}},y=function(t,i,r,u,e){return function(o){var s="leafletDirectiveLabel."+i,h=e.replace("markers.","");f(t,function(t){r==="emit"?t.$emit(s,{leafletEvent:o,label:u,markerName:h}):r==="broadcast"&&n.$broadcast(s,{leafletEvent:o,label:u,markerName:h})})}},e=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","dragstart","drag","dragend","move","remove","popupopen","popupclose"]},o=function(){return["click","dblclick","mousedown","mouseover","mouseout","contextmenu","add","remove","popupopen","popupclose"]};return{getAvailableMapEvents:function(){return["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","contextmenu","focus","blur","preclick","load","unload","viewreset","movestart","move","moveend","dragstart","drag","dragend","zoomstart","zoomend","zoomlevelschange","resize","autopanstart","layeradd","layerremove","baselayerchange","overlayadd","overlayremove","locationfound","locationerror","popupopen","popupclose","draw:created","draw:edited","draw:deleted","draw:drawstart","draw:drawstop","draw:editstart","draw:editstop","draw:deletestart","draw:deletestop","geosearch_foundlocations","geosearch_showlocation"]},genDispatchMapEvent:function(t,i,r){return function(u){var e="leafletDirectiveMap."+i;f(t,function(t){r==="emit"?t.$emit(e,{leafletEvent:u}):r==="broadcast"&&n.$broadcast(e,{leafletEvent:u})})}},getAvailableMarkerEvents:e,getAvailablePathEvents:o,notifyCenterChangedToBounds:function(n){n.$broadcast("boundsChanged")},notifyCenterUrlHashChanged:function(n,t,i,r){if(u(i.urlHashCenter)){var f=t.getCenter(),e=f.lat.toFixed(4)+":"+f.lng.toFixed(4)+":"+t.getZoom();u(r.c)&&r.c===e||n.$emit("centerUrlHash",e)}},bindMarkerEvents:function(n,t,r,f){var v=[],o,l,w="broadcast",y,p,b;if(u(f.eventBroadcast))if(s(f.eventBroadcast))if(u(f.eventBroadcast.marker))if(s(f.eventBroadcast.marker))if(f.eventBroadcast.marker.logic!==undefined&&f.eventBroadcast.marker.logic!==null&&(f.eventBroadcast.marker.logic!=="emit"&&f.eventBroadcast.marker.logic!=="broadcast"?i.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):f.eventBroadcast.marker.logic==="emit"&&(w="emit")),y=!1,p=!1,f.eventBroadcast.marker.enable!==undefined&&f.eventBroadcast.marker.enable!==null&&typeof f.eventBroadcast.marker.enable=="object"&&(y=!0),f.eventBroadcast.marker.disable!==undefined&&f.eventBroadcast.marker.disable!==null&&typeof f.eventBroadcast.marker.disable=="object"&&(p=!0),y&&p)i.warn("[AngularJS - Leaflet] can not enable and disable events at the same time");else if(y||p)if(y)for(o=0;o<f.eventBroadcast.marker.enable.length;o++)l=f.eventBroadcast.marker.enable[o],v.indexOf(l)!==-1?i.warn("[AngularJS - Leaflet] This event "+l+" is already enabled"):e().indexOf(l)===-1?i.warn("[AngularJS - Leaflet] This event "+l+" does not exist"):v.push(l);else for(v=e(),o=0;o<f.eventBroadcast.marker.disable.length;o++)l=f.eventBroadcast.marker.disable[o],b=v.indexOf(l),b===-1?i.warn("[AngularJS - Leaflet] This event "+l+" does not exist or has been already disabled"):v.splice(b,1);else i.warn("[AngularJS - Leaflet] must enable or disable events");else i.warn("[AngularJS - Leaflet] event-broadcast.marker must be an object check your model.");else v=e();else i.error("[AngularJS - Leaflet] event-broadcast must be an object check your model.");else v=e();for(o=0;o<v.length;o++){l=v[o];n.on(l,a(l,w,f,n,t,r))}h.LabelPlugin.isLoaded()&&u(n.label)&&c(f,w,n,t)},bindPathEvents:function(n,t,r,f){var a=[],e,l,w="broadcast",y,p,b;if(u(f.eventBroadcast))if(s(f.eventBroadcast))if(u(f.eventBroadcast.path))if(s(f.eventBroadcast.paths))i.warn("[AngularJS - Leaflet] event-broadcast.path must be an object check your model.");else if(f.eventBroadcast.path.logic!==undefined&&f.eventBroadcast.path.logic!==null&&(f.eventBroadcast.path.logic!=="emit"&&f.eventBroadcast.path.logic!=="broadcast"?i.warn("[AngularJS - Leaflet] Available event propagation logic are: 'emit' or 'broadcast'."):f.eventBroadcast.path.logic==="emit"&&(w="emit")),y=!1,p=!1,f.eventBroadcast.path.enable!==undefined&&f.eventBroadcast.path.enable!==null&&typeof f.eventBroadcast.path.enable=="object"&&(y=!0),f.eventBroadcast.path.disable!==undefined&&f.eventBroadcast.path.disable!==null&&typeof f.eventBroadcast.path.disable=="object"&&(p=!0),y&&p)i.warn("[AngularJS - Leaflet] can not enable and disable events at the same time");else if(y||p)if(y)for(e=0;e<f.eventBroadcast.path.enable.length;e++)l=f.eventBroadcast.path.enable[e],a.indexOf(l)!==-1?i.warn("[AngularJS - Leaflet] This event "+l+" is already enabled"):o().indexOf(l)===-1?i.warn("[AngularJS - Leaflet] This event "+l+" does not exist"):a.push(l);else for(a=o(),e=0;e<f.eventBroadcast.path.disable.length;e++)l=f.eventBroadcast.path.disable[e],b=a.indexOf(l),b===-1?i.warn("[AngularJS - Leaflet] This event "+l+" does not exist or has been already disabled"):a.splice(b,1);else i.warn("[AngularJS - Leaflet] must enable or disable events");else a=o();else i.error("[AngularJS - Leaflet] event-broadcast must be an object check your model.");else a=o();for(e=0;e<a.length;e++){l=a[e];n.on(l,v(l,w,f,a,t))}h.LabelPlugin.isLoaded()&&u(n.label)&&c(f,w,n,t)}}}]);angular.module("leaflet-directive").factory("leafletLayerHelpers",["$rootScope","$log","leafletHelpers",function(n,t,i){function h(n){return e(n.type)?Object.keys(u).indexOf(n.type)===-1?(t.error("[AngularJS - Leaflet] A layer must have a valid type: "+Object.keys(u)),!1):u[n.type].mustHaveUrl&&!e(n.url)?(t.error("[AngularJS - Leaflet] A base layer must have an url"),!1):u[n.type].mustHaveData&&!f(n.data)?(t.error('[AngularJS - Leaflet] The base layer must have a "data" array attribute'),!1):u[n.type].mustHaveLayer&&!f(n.layer)?(t.error("[AngularJS - Leaflet] The type of layer "+n.type+" must have an layer defined"),!1):u[n.type].mustHaveBounds&&!f(n.bounds)?(t.error("[AngularJS - Leaflet] The type of layer "+n.type+" must have bounds defined"),!1):u[n.type].mustHaveKey&&!f(n.key)?(t.error("[AngularJS - Leaflet] The type of layer "+n.type+" must have key defined"),!1):!0:(t.error("[AngularJS - Leaflet] A layer must have a valid type defined."),!1)}var r=i,e=i.isString,s=i.isObject,f=i.isDefined,o=function(i){if(!r.UTFGridPlugin.isLoaded()){t.error("[AngularJS - Leaflet] The UTFGrid plugin is not loaded.");return}var u=new L.UtfGrid(i.url,i.pluginOptions);u.on("mouseover",function(t){n.$broadcast("leafletDirectiveMap.utfgridMouseover",t)});u.on("mouseout",function(t){n.$broadcast("leafletDirectiveMap.utfgridMouseout",t)});u.on("click",function(t){n.$broadcast("leafletDirectiveMap.utfgridClick",t)});return u},u={xyz:{mustHaveUrl:!0,createLayer:function(n){return L.tileLayer(n.url,n.options)}},mapbox:{mustHaveKey:!0,createLayer:function(n){var t="//{s}.tiles.mapbox.com/v3/"+n.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,n.options)}},geoJSON:{mustHaveUrl:!0,createLayer:function(n){if(r.GeoJSONPlugin.isLoaded())return new L.TileLayer.GeoJSON(n.url,n.pluginOptions,n.options)}},utfGrid:{mustHaveUrl:!0,createLayer:o},cartodbTiles:{mustHaveKey:!0,createLayer:function(n){var t="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/{z}/{x}/{y}.png";return L.tileLayer(t,n.options)}},cartodbUTFGrid:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(n){return n.url="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/"+n.layer+"/{z}/{x}/{y}.grid.json",o(n)}},cartodbInteractive:{mustHaveKey:!0,mustHaveLayer:!0,createLayer:function(n){var i="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/{z}/{x}/{y}.png",r=L.tileLayer(i,n.options),t;return n.url="//"+n.user+".cartodb.com/api/v1/map/"+n.key+"/"+n.layer+"/{z}/{x}/{y}.grid.json",t=o(n),L.layerGroup([r,t])}},wms:{mustHaveUrl:!0,createLayer:function(n){return L.tileLayer.wms(n.url,n.options)}},wmts:{mustHaveUrl:!0,createLayer:function(n){return L.tileLayer.wmts(n.url,n.options)}},wfs:{mustHaveUrl:!0,mustHaveLayer:!0,createLayer:function(params){if(r.WFSLayerPlugin.isLoaded()){var options=angular.copy(params.options);return options.crs&&"string"==typeof options.crs&&(options.crs=eval(options.crs)),new L.GeoJSON.WFS(params.url,params.layer,options)}}},group:{mustHaveUrl:!1,createLayer:function(){return L.layerGroup()}},featureGroup:{mustHaveUrl:!1,createLayer:function(){return L.featureGroup()}},google:{mustHaveUrl:!1,createLayer:function(n){var t=n.type||"SATELLITE";if(r.GoogleLayerPlugin.isLoaded())return new L.Google(t,n.options)}},china:{mustHaveUrl:!1,createLayer:function(n){var t=n.type||"";if(r.ChinaLayerPlugin.isLoaded())return L.tileLayer.chinaProvider(t,n.options)}},ags:{mustHaveUrl:!0,createLayer:function(n){var i,t;if(r.AGSLayerPlugin.isLoaded())return i=angular.copy(n.options),angular.extend(i,{url:n.url}),t=new lvector.AGS(i),t.onAdd=function(n){this.setMap(n)},t.onRemove=function(){this.setMap(null)},t}},dynamic:{mustHaveUrl:!0,createLayer:function(n){if(r.DynamicMapLayerPlugin.isLoaded())return L.esri.dynamicMapLayer(n.url,n.options)}},markercluster:{mustHaveUrl:!1,createLayer:function(n){if(!r.MarkerClusterPlugin.isLoaded()){t.error("[AngularJS - Leaflet] The markercluster plugin is not loaded.");return}return new L.MarkerClusterGroup(n.options)}},bing:{mustHaveUrl:!1,createLayer:function(n){if(r.BingLayerPlugin.isLoaded())return new L.BingLayer(n.key,n.options)}},heatmap:{mustHaveUrl:!1,mustHaveData:!0,createLayer:function(n){if(r.HeatMapLayerPlugin.isLoaded()){var t=new L.TileLayer.WebGLHeatMap(n.options);return f(n.data)&&t.setData(n.data),t}}},yandex:{mustHaveUrl:!1,createLayer:function(n){var t=n.type||"map";if(r.YandexLayerPlugin.isLoaded())return new L.Yandex(t,n.options)}},imageOverlay:{mustHaveUrl:!0,mustHaveBounds:!0,createLayer:function(n){return L.imageOverlay(n.url,n.bounds,n.options)}},custom:{createLayer:function(n){if(n.layer instanceof L.Class)return angular.copy(n.layer);t.error("[AngularJS - Leaflet] A custom layer must be a leaflet Class")}},cartodb:{mustHaveUrl:!0,createLayer:function(n){return cartodb.createLayer(n.map,n.url)}}};return{createLayer:function(n){var i,r;if(h(n)){if(!e(n.name)){t.error("[AngularJS - Leaflet] A base layer must have a name");return}s(n.layerParams)||(n.layerParams={});s(n.layerOptions)||(n.layerOptions={});for(i in n.layerParams)n.layerOptions[i]=n.layerParams[i];return r={url:n.url,data:n.data,options:n.layerOptions,layer:n.layer,type:n.layerType,bounds:n.bounds,key:n.key,pluginOptions:n.pluginOptions,user:n.user},u[n.type].createLayer(r)}}}}]);angular.module("leaflet-directive").factory("leafletControlHelpers",["$rootScope","$log","leafletHelpers","leafletMapDefaults",function(n,t,i,r){var e=i.isObject,f=i.isDefined,u,o=function(n,t,i){var f=r.getDefaults(i),u;return f.controls.layers.visible?(u=0,e(n)&&(u+=Object.keys(n).length),e(t)&&(u+=Object.keys(t).length),u>1):!1},s=function(n){var t=r.getDefaults(n),i={collapsed:t.controls.layers.collapsed,position:t.controls.layers.position};return angular.extend(i,t.controls.layers.options),t.controls.layers&&f(t.controls.layers.control)?t.controls.layers.control.apply(this,[[],[],i]):new L.control.layers([],[],i)};return{layersControlMustBeVisible:o,updateLayersControl:function(n,t,i,r,e,h){var c,l=o(r,e,t);if(f(u)&&i){for(c in h.baselayers)u.removeLayer(h.baselayers[c]);for(c in h.overlays)u.removeLayer(h.overlays[c]);u.removeFrom(n)}if(l){u=s(t);for(c in r)f(h.baselayers[c])&&u.addBaseLayer(h.baselayers[c],r[c].name);for(c in e)f(h.overlays[c])&&u.addOverlay(h.overlays[c],e[c].name);u.addTo(n)}return l}}}]);angular.module("leaflet-directive").factory("leafletLegendHelpers",function(){var n=function(n,t){var r,i,u,f;if(n.innerHTML="",t.error)n.innerHTML+='<div class="info-title alert alert-danger">'+t.error.message+"<\/div>";else for(r=0;r<t.layers.length;r++)for(i=t.layers[r],n.innerHTML+='<div class="info-title" data-layerid="'+i.layerId+'">'+i.layerName+"<\/div>",u=0;u<i.legend.length;u++)f=i.legend[u],n.innerHTML+='<div class="inline" data-layerid="'+i.layerId+'"><img src="data:'+f.contentType+";base64,"+f.imageData+'" /><\/div><div class="info-label" data-layerid="'+i.layerId+'">'+f.label+"<\/div>"},t=function(t,i){return function(){var r=L.DomUtil.create("div",i);if(L.Browser.touch)L.DomEvent.on(r,"click",L.DomEvent.stopPropagation);else{L.DomEvent.disableClickPropagation(r);L.DomEvent.on(r,"mousewheel",L.DomEvent.stopPropagation)}return n(r,t),r}},i=function(n,t){return function(){for(var i=L.DomUtil.create("div",t),r=0;r<n.colors.length;r++)i.innerHTML+='<div class="outline"><i style="background:'+n.colors[r]+'"><\/i><\/div><div class="info-label">'+n.labels[r]+"<\/div>";if(L.Browser.touch)L.DomEvent.on(i,"click",L.DomEvent.stopPropagation);else{L.DomEvent.disableClickPropagation(i);L.DomEvent.on(i,"mousewheel",L.DomEvent.stopPropagation)}return i}};return{getOnAddArcGISLegend:t,getOnAddArrayLegend:i,updateArcGISLegend:n}});angular.module("leaflet-directive").factory("leafletPathsHelpers",["$rootScope","$log","leafletHelpers",function(n,t,i){function s(n){return n.filter(function(n){return f(n)}).map(function(n){return new L.LatLng(n.lat,n.lng)})}function a(n){return new L.LatLng(n.lat,n.lng)}function v(n){return n.map(function(n){return s(n)})}function y(n,t){for(var i,u={},f=0;f<o.length;f++)i=o[f],r(n[i])?u[i]=n[i]:r(t.path[i])&&(u[i]=t.path[i]);return u}var r=i.isDefined,e=i.isArray,l=i.isNumber,f=i.isValidPoint,o=["stroke","weight","color","opacity","fill","fillColor","fillOpacity","dashArray","lineCap","lineJoin","clickable","pointerEvents","className","smoothFactor","noClip"],u=function(n,t){for(var i,f={},u=0;u<o.length;u++)i=o[u],r(t[i])&&(f[i]=t[i]);n.setStyle(t)},h=function(n){var t,i;if(!e(n))return!1;for(t=0;t<n.length;t++)if(i=n[t],!f(i))return!1;return!0},c={polyline:{isValid:function(n){var t=n.latlngs;return h(t)},createPath:function(n){return new L.Polyline([],n)},setPath:function(n,t){n.setLatLngs(s(t.latlngs));u(n,t);return}},multiPolyline:{isValid:function(n){var t=n.latlngs,i,r;if(!e(t))return!1;for(i in t)if(r=t[i],!h(r))return!1;return!0},createPath:function(n){return new L.multiPolyline([[[0,0],[1,1]]],n)},setPath:function(n,t){n.setLatLngs(v(t.latlngs));u(n,t);return}},polygon:{isValid:function(n){var t=n.latlngs;return h(t)},createPath:function(n){return new L.Polygon([],n)},setPath:function(n,t){n.setLatLngs(s(t.latlngs));u(n,t);return}},multiPolygon:{isValid:function(n){var t=n.latlngs,i,r;if(!e(t))return!1;for(i in t)if(r=t[i],!h(r))return!1;return!0},createPath:function(n){return new L.MultiPolygon([[[0,0],[1,1],[0,1]]],n)},setPath:function(n,t){n.setLatLngs(v(t.latlngs));u(n,t);return}},rectangle:{isValid:function(n){var t=n.latlngs,i,r;if(!e(t)||t.length!==2)return!1;for(i in t)if(r=t[i],!f(r))return!1;return!0},createPath:function(n){return new L.Rectangle([[0,0],[1,1]],n)},setPath:function(n,t){n.setBounds(new L.LatLngBounds(s(t.latlngs)));u(n,t)}},circle:{isValid:function(n){var t=n.latlngs;return f(t)&&l(n.radius)},createPath:function(n){return new L.Circle([0,0],1,n)},setPath:function(n,t){n.setLatLng(a(t.latlngs));r(t.radius)&&n.setRadius(t.radius);u(n,t)}},circleMarker:{isValid:function(n){var t=n.latlngs;return f(t)&&l(n.radius)},createPath:function(n){return new L.CircleMarker([0,0],n)},setPath:function(n,t){n.setLatLng(a(t.latlngs));r(t.radius)&&n.setRadius(t.radius);u(n,t)}}},p=function(n){var t={};return n.latlngs&&(t.latlngs=n.latlngs),n.radius&&(t.radius=n.radius),t};return{setPathOptions:function(n,t,i){r(t)||(t="polyline");c[t].setPath(n,i)},createPath:function(n,i,u){r(i.type)||(i.type="polyline");var f=y(i,u),e=p(i);if(!c[i.type].isValid(e)){t.error("[AngularJS - Leaflet] Invalid data passed to the "+i.type+" path");return}return c[i.type].createPath(f)}}}]);angular.module("leaflet-directive").factory("leafletBoundsHelpers",["$log","leafletHelpers",function(n,t){function u(n){return angular.isDefined(n)&&angular.isDefined(n.southWest)&&angular.isDefined(n.northEast)&&angular.isNumber(n.southWest.lat)&&angular.isNumber(n.southWest.lng)&&angular.isNumber(n.northEast.lat)&&angular.isNumber(n.northEast.lng)}var r=t.isArray,i=t.isNumber;return{createLeafletBounds:function(n){if(u(n))return L.latLngBounds([n.southWest.lat,n.southWest.lng],[n.northEast.lat,n.northEast.lng])},isValidBounds:u,createBoundsFromArray:function(t){if(!(r(t)&&t.length===2&&r(t[0])&&r(t[1])&&t[0].length===2&&t[1].length===2&&i(t[0][0])&&i(t[0][1])&&i(t[1][0])&&i(t[1][1]))){n.error("[AngularJS - Leaflet] The bounds array is not valid.");return}return{northEast:{lat:t[0][0],lng:t[0][1]},southWest:{lat:t[1][0],lng:t[1][1]}}}}}]);angular.module("leaflet-directive").factory("leafletMarkersHelpers",["$rootScope","leafletHelpers","$log",function(n,t,i){var r=t.isDefined,a=t.MarkerClusterPlugin,v=t.AwesomeMarkersPlugin,y=t.MakiMarkersPlugin,h=t.safeApply,c=t,u=t.isString,l=t.isNumber,e=t.isObject,f={},o=function(n){if(r(n)&&r(n.type)&&n.type==="awesomeMarker")return v.isLoaded()||i.error("[AngularJS - Leaflet] The AwesomeMarkers Plugin is not loaded."),new L.AwesomeMarkers.icon(n);if(r(n)&&r(n.type)&&n.type==="makiMarker")return y.isLoaded()||i.error("[AngularJS - Leaflet] The MakiMarkers Plugin is not loaded."),new L.MakiMarkers.icon(n);if(r(n)&&r(n.type)&&n.type==="div")return new L.divIcon(n);var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg==",u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAYAAACoYAD2AAAC5ElEQVRYw+2YW4/TMBCF45S0S1luXZCABy5CgLQgwf//S4BYBLTdJLax0fFqmB07nnQfEGqkIydpVH85M+NLjPe++dcPc4Q8Qh4hj5D/AaQJx6H/4TMwB0PeBNwU7EGQAmAtsNfAzoZkgIa0ZgLMa4Aj6CxIAsjhjOCoL5z7Glg1JAOkaicgvQBXuncwJAWjksLtBTWZe04CnYRktUGdilALppZBOgHGZcBzL6OClABvMSVIzyBjazOgrvACf1ydC5mguqAVg6RhdkSWQFj2uxfaq/BrIZOLEWgZdALIDvcMcZLD8ZbLC9de4yR1sYMi4G20S4Q/PWeJYxTOZn5zJXANZHIxAd4JWhPIloTJZhzMQduM89WQ3MUVAE/RnhAXpTycqys3NZALOBbB7kFrgLesQl2h45Fcj8L1tTSohUwuxhy8H/Qg6K7gIs+3kkaigQCOcyEXCHN07wyQazhrmIulvKMQAwMcmLNqyCVyMAI+BuxSMeTk3OPikLY2J1uE+VHQk6ANrhds+tNARqBeaGc72cK550FP4WhXmFmcMGhTwAR1ifOe3EvPqIegFmF+C8gVy0OfAaWQPMR7gF1OQKqGoBjq90HPMP01BUjPOqGFksC4emE48tWQAH0YmvOgF3DST6xieJgHAWxPAHMuNhrImIdvoNOKNWIOcE+UXE0pYAnkX6uhWsgVXDxHdTfCmrEEmMB2zMFimLVOtiiajxiGWrbU52EeCdyOwPEQD8LqyPH9Ti2kgYMf4OhSKB7qYILbBv3CuVTJ11Y80oaseiMWOONc/Y7kJYe0xL2f0BaiFTxknHO5HaMGMublKwxFGzYdWsBF174H/QDknhTHmHHN39iWFnkZx8lPyM8WHfYELmlLKtgWNmFNzQcC1b47gJ4hL19i7o65dhH0Negbca8vONZoP7doIeOC9zXm8RjuL0Gf4d4OYaU5ljo3GYiqzrWQHfJxA6ALhDpVKv9qYeZA8eM3EhfPSCmpuD0AAAAASUVORK5CYII=";return r(n)?(r(n.iconUrl)||(n.iconUrl=t,n.shadowUrl=u),new L.Icon(n)):new L.Icon.Default({iconUrl:t,shadowUrl:u})},p=function(n){r(f[n])&&f.splice(n,1)},w=function(){f={}},s=function(n,t,i){var u,e;if(n.closePopup(),r(i)&&r(i.overlays))for(u in i.overlays)if((i.overlays[u]instanceof L.LayerGroup||i.overlays[u]instanceof L.FeatureGroup)&&i.overlays[u].hasLayer(n)){i.overlays[u].removeLayer(n);return}if(r(f))for(e in f)f[e].hasLayer(n)&&f[e].removeLayer(n);t.hasLayer(n)&&t.removeLayer(n)};return{resetMarkerGroup:p,resetMarkerGroups:w,deleteMarker:s,createMarker:function(n){var f,t,e;if(!r(n)){i.error("[AngularJS - Leaflet] The marker definition is not valid.");return}f={icon:o(n.icon),title:r(n.title)?n.title:"",draggable:r(n.draggable)?n.draggable:!1,clickable:r(n.clickable)?n.clickable:!0,riseOnHover:r(n.riseOnHover)?n.riseOnHover:!1,zIndexOffset:r(n.zIndexOffset)?n.zIndexOffset:0,iconAngle:r(n.iconAngle)?n.iconAngle:0};for(t in n)n.hasOwnProperty(t)&&!f.hasOwnProperty(t)&&(f[t]=n[t]);return e=new L.marker(n,f),u(n.message)||e.unbindPopup(),e},addMarkerToGroup:function(n,t,e,o){if(!u(t)){i.error("[AngularJS - Leaflet] The marker group you have specified is invalid.");return}if(!a.isLoaded()){i.error("[AngularJS - Leaflet] The MarkerCluster plugin is not loaded.");return}r(f[t])||(f[t]=new L.MarkerClusterGroup(e),o.addLayer(f[t]));f[t].addLayer(n)},listenMarkerEvents:function(n,t,i){n.on("popupopen",function(){h(i,function(){t.focus=!0})});n.on("popupclose",function(){h(i,function(){t.focus=!1})})},addMarkerWatcher:function(n,t,f,h,a){var v=f.$watch("markers."+t,function(t,f){var w,b,y,p,k;if(!r(t)){s(n,a,h);v();return}if(r(f)){if(!(l(t.lat)&&l(t.lng))){i.warn("There are problems with lat-lng data, please verify your marker model");s(n,a,h);return}if(u(t.layer)||u(f.layer)&&(r(h.overlays[f.layer])&&h.overlays[f.layer].hasLayer(n)&&(h.overlays[f.layer].removeLayer(n),n.closePopup()),a.hasLayer(n)||a.addLayer(n)),u(t.layer)&&f.layer!==t.layer){if(u(f.layer)&&r(h.overlays[f.layer])&&h.overlays[f.layer].hasLayer(n)&&h.overlays[f.layer].removeLayer(n),n.closePopup(),a.hasLayer(n)&&a.removeLayer(n),!r(h.overlays[t.layer])){i.error("[AngularJS - Leaflet] You must use a name of an existing layer");return}if(w=h.overlays[t.layer],!(w instanceof L.LayerGroup||w instanceof L.FeatureGroup)){i.error('[AngularJS - Leaflet] A marker can only be added to a layer of type "group" or "featureGroup"');return}w.addLayer(n);a.hasLayer(n)&&t.focus===!0&&n.openPopup()}t.draggable!==!0&&f.draggable===!0&&r(n.dragging)&&n.dragging.disable();t.draggable===!0&&f.draggable!==!0&&(n.dragging?n.dragging.enable():L.Handler.MarkerDrag&&(n.dragging=new L.Handler.MarkerDrag(n),n.options.draggable=!0,n.dragging.enable()));e(t.icon)||e(f.icon)&&(n.setIcon(o()),n.closePopup(),n.unbindPopup(),u(t.message)&&n.bindPopup(t.message,t.popupOptions));e(t.icon)&&e(f.icon)&&!angular.equals(t.icon,f.icon)&&(b=!1,n.dragging&&(b=n.dragging.enabled()),n.setIcon(o(t.icon)),b&&n.dragging.enable(),n.closePopup(),n.unbindPopup(),u(t.message)&&n.bindPopup(t.message,t.popupOptions));!u(t.message)&&u(f.message)&&(n.closePopup(),n.unbindPopup());c.LabelPlugin.isLoaded()&&r(t.label)&&r(t.label.message)&&!angular.equals(t.label.message,f.label.message)&&n.updateLabelContent(t.label.message);u(t.message)&&!u(f.message)&&(n.bindPopup(t.message,t.popupOptions),t.focus===!0&&n.openPopup());u(t.message)&&u(f.message)&&t.message!==f.message&&n.setPopupContent(t.message);y=!1;t.focus!==!0&&f.focus===!0&&(n.closePopup(),y=!0);t.focus===!0&&f.focus!==!0&&(n.openPopup(),y=!0);f.focus===!0&&t.focus===!0&&(n.openPopup(),y=!0);f.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(t.zIndexOffset);p=n.getLatLng();k=u(t.layer)&&c.MarkerClusterPlugin.is(h.overlays[t.layer]);k?y?(t.lat!==f.lat||t.lng!==f.lng)&&(h.overlays[t.layer].removeLayer(n),n.setLatLng([t.lat,t.lng]),h.overlays[t.layer].addLayer(n)):p.lat!==t.lat||p.lng!==t.lng?(h.overlays[t.layer].removeLayer(n),n.setLatLng([t.lat,t.lng]),h.overlays[t.layer].addLayer(n)):t.lat!==f.lat||t.lng!==f.lng?(h.overlays[t.layer].removeLayer(n),n.setLatLng([t.lat,t.lng]),h.overlays[t.layer].addLayer(n)):e(t.icon)&&e(f.icon)&&!angular.equals(t.icon,f.icon)&&(h.overlays[t.layer].removeLayer(n),h.overlays[t.layer].addLayer(n)):(p.lat!==t.lat||p.lng!==t.lng)&&n.setLatLng([t.lat,t.lng])}},!0)}}}]);angular.module("leaflet-directive").factory("leafletHelpers",["$q","$log",function(n,t){function i(n,i){var r,u;if(angular.isDefined(i))r=i;else if(Object.keys(n).length===0)r="main";else if(Object.keys(n).length>=1)for(u in n)n.hasOwnProperty(u)&&(r=u);else Object.keys(n).length===0?r="main":t.error("[AngularJS - Leaflet] - You have more than 1 map on the DOM, you must provide the map ID to the leafletData.getXXX call");return r}function r(t,r){var u=i(t,r),f;return angular.isDefined(t[u])&&t[u].resolvedDefer!==!0?f=t[u].defer:(f=n.defer(),t[u]={defer:f,resolvedDefer:!1}),f}return{isEmpty:function(n){return Object.keys(n).length===0},isUndefinedOrEmpty:function(n){return angular.isUndefined(n)||n===null||Object.keys(n).length===0},isDefined:function(n){return angular.isDefined(n)&&n!==null},isNumber:function(n){return angular.isNumber(n)},isString:function(n){return angular.isString(n)},isArray:function(n){return angular.isArray(n)},isObject:function(n){return angular.isObject(n)},isFunction:function(n){return angular.isFunction(n)},equals:function(n,t){return angular.equals(n,t)},isValidCenter:function(n){return angular.isDefined(n)&&angular.isNumber(n.lat)&&angular.isNumber(n.lng)&&angular.isNumber(n.zoom)},isValidPoint:function(n){return angular.isDefined(n)&&angular.isNumber(n.lat)&&angular.isNumber(n.lng)},isSameCenterOnMap:function(n,t){var i=t.getCenter(),r=t.getZoom();return n.lat&&n.lng&&i.lat.toFixed(4)===n.lat.toFixed(4)&&i.lng.toFixed(4)===n.lng.toFixed(4)&&r===n.zoom?!0:!1},safeApply:function(n,t){var i=n.$root.$$phase;i==="$apply"||i==="$digest"?n.$eval(t):n.$apply(t)},obtainEffectiveMapId:i,getDefer:function(n,t){var u=i(n,t);return angular.isDefined(n[u])&&n[u].resolvedDefer!==!1?n[u].defer:r(n,t)},getUnresolvedDefer:r,setResolvedDefer:function(n,t){var r=i(n,t);n[r].resolvedDefer=!0},AwesomeMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.AwesomeMarkers)&&angular.isDefined(L.AwesomeMarkers.Icon)?!0:!1},is:function(n){return this.isLoaded()?n instanceof L.AwesomeMarkers.Icon:!1},equal:function(n,t){return this.isLoaded()?this.is(n)?angular.equals(n,t):!1:!1}},PolylineDecoratorPlugin:{isLoaded:function(){return angular.isDefined(L.PolylineDecorator)?!0:!1},is:function(n){return this.isLoaded()?n instanceof L.PolylineDecorator:!1},equal:function(n,t){return this.isLoaded()?this.is(n)?angular.equals(n,t):!1:!1}},MakiMarkersPlugin:{isLoaded:function(){return angular.isDefined(L.MakiMarkers)&&angular.isDefined(L.MakiMarkers.Icon)?!0:!1},is:function(n){return this.isLoaded()?n instanceof L.MakiMarkers.Icon:!1},equal:function(n,t){return this.isLoaded()?this.is(n)?angular.equals(n,t):!1:!1}},LabelPlugin:{isLoaded:function(){return angular.isDefined(L.Label)},is:function(n){return this.isLoaded()?n instanceof L.MarkerClusterGroup:!1}},MarkerClusterPlugin:{isLoaded:function(){return angular.isDefined(L.MarkerClusterGroup)},is:function(n){return this.isLoaded()?n instanceof L.MarkerClusterGroup:!1}},GoogleLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Google)},is:function(n){return this.isLoaded()?n instanceof L.Google:!1}},ChinaLayerPlugin:{isLoaded:function(){return angular.isDefined(L.tileLayer.chinaProvider)}},HeatMapLayerPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.WebGLHeatMap)}},BingLayerPlugin:{isLoaded:function(){return angular.isDefined(L.BingLayer)},is:function(n){return this.isLoaded()?n instanceof L.BingLayer:!1}},WFSLayerPlugin:{isLoaded:function(){return L.GeoJSON.WFS!==undefined},is:function(n){return this.isLoaded()?n instanceof L.GeoJSON.WFS:!1}},AGSLayerPlugin:{isLoaded:function(){return lvector!==undefined&&lvector.AGS!==undefined},is:function(n){return this.isLoaded()?n instanceof lvector.AGS:!1}},YandexLayerPlugin:{isLoaded:function(){return angular.isDefined(L.Yandex)},is:function(n){return this.isLoaded()?n instanceof L.Yandex:!1}},DynamicMapLayerPlugin:{isLoaded:function(){return L.esri!==undefined&&L.esri.dynamicMapLayer!==undefined},is:function(n){return this.isLoaded()?n instanceof L.esri.dynamicMapLayer:!1}},GeoJSONPlugin:{isLoaded:function(){return angular.isDefined(L.TileLayer.GeoJSON)},is:function(n){return this.isLoaded()?n instanceof L.TileLayer.GeoJSON:!1}},UTFGridPlugin:{isLoaded:function(){return angular.isDefined(L.UtfGrid)},is:function(n){return this.isLoaded()?n instanceof L.UtfGrid:(t.error("[AngularJS - Leaflet] No UtfGrid plugin found."),!1)}},CartoDB:{isLoaded:function(){return cartodb},is:function(){return!0}},Leaflet:{DivIcon:{is:function(n){return n instanceof L.DivIcon},equal:function(n,t){return this.is(n)?angular.equals(n,t):!1}},Icon:{is:function(n){return n instanceof L.Icon},equal:function(n,t){return this.is(n)?angular.equals(n,t):!1}}}}}])})();
/*
//# sourceMappingURL=angular-leaflet-directive.min.js.map
*/