L.GeoSearch={};L.GeoSearch.Provider={};L.GeoSearch.Result=function(n,t,i){this.X=n;this.Y=t;this.Label=i};L.Control.GeoSearch=L.Control.extend({options:{position:"topcenter",showMarker:!0},_config:{country:"",searchLabel:"search for address ...",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18},initialize:function(n){L.Util.extend(this.options,n);L.Util.extend(this._config,n)},onAdd:function(n){for(var f,i,t,r,e,o=n._controlContainer,s=o.childNodes,h=!1,u=0,c=s.length;u<c;u++)if(f=s[u].className,/leaflet-top/.test(f)&&/leaflet-center/.test(f)){h=!0;break}return h||(i=document.createElement("div"),i.className+="leaflet-top leaflet-center",o.appendChild(i),n._controlCorners.topcenter=i),this._map=n,this._container=L.DomUtil.create("div","leaflet-control-geosearch"),t=document.createElement("input"),t.id="leaflet-control-geosearch-qry",t.type="text",t.placeholder=this._config.searchLabel,this._searchbox=t,r=document.createElement("div"),r.id="leaflet-control-geosearch-msg",r.className="leaflet-control-geosearch-msg",this._msgbox=r,e=document.createElement("ul"),e.id="leaflet-control-geosearch-results",this._resultslist=e,this._msgbox.appendChild(this._resultslist),this._container.appendChild(this._searchbox),this._container.appendChild(this._msgbox),L.DomEvent.addListener(this._container,"click",L.DomEvent.stop).addListener(this._searchbox,"keypress",this._onKeyUp,this),L.DomEvent.disableClickPropagation(this._container),this._container},geosearch:function(n){var t,r,i;try{t=this._config.provider;typeof t.GetLocations=="function"?r=t.GetLocations(n,function(n){this._processResults(n)}.bind(this)):(i=t.GetServiceUrl(n),this.sendRequest(t,i))}catch(u){this._printError(u)}},sendRequest:function(n,t){function f(n){n=n+"&callback=parseLocation";var t=document.createElement("script");t.id="getJsonP";t.src=n;t.async=!0;document.body.appendChild(t)}var u=this,i,r;window.parseLocation=function(t){var i=n.ParseJSON(t);u._processResults(i);document.body.removeChild(document.getElementById("getJsonP"));delete window.parseLocation};XMLHttpRequest&&(i=new XMLHttpRequest,"withCredentials"in i?(i=new XMLHttpRequest,i.onreadystatechange=function(){if(i.readyState==4)if(i.status==200){var r=JSON.parse(i.responseText),e=n.ParseJSON(r);u._processResults(e)}else i.status==0||i.status==400?f(t):u._printError(i.responseText)},i.open("GET",t,!0),i.send()):XDomainRequest?(r=new XDomainRequest,r.onerror=function(n){u._printError(n)},r.onload=function(){var t=JSON.parse(r.responseText),i=n.ParseJSON(t);u._processResults(i)},r.open("GET",t),r.send()):f(t))},_processResults:function(n){n.length>0?(this._map.fireEvent("geosearch_foundlocations",{Locations:n}),this._showLocation(n[0])):this._printError(this._config.notFoundMessage)},_showLocation:function(n){this.options.showMarker==!0&&(typeof this._positionMarker=="undefined"?this._positionMarker=L.marker([n.Y,n.X],{draggable:!0}).addTo(this._map):this._positionMarker.setLatLng([n.Y,n.X]));this._map.setView([n.Y,n.X],this._config.zoomLevel,!1);this._map.fireEvent("geosearch_showlocation",{Location:n})},_printError:function(n){var t=this._resultslist;t.innerHTML="<li>"+n+"<\/li>";t.style.display="block";setTimeout(function(){t.style.display="none"},3e3)},_onKeyUp:function(n){var t=document.getElementById("leaflet-control-geosearch-qry");n.keyCode===27?(t.value="",this._map._container.focus()):n.keyCode===13&&this.geosearch(t.value)}});
/*
//# sourceMappingURL=l.control.geosearch.min.js.map
*/